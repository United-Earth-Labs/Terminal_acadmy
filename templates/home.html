{% extends 'base.html' %}

{% block title %}Terminal Academy - Learn Ethical Hacking{% endblock %}

{% block content %}
<!-- Hero Section -->
<section
    style="padding: var(--space-2xl) 0; background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);">
    <div class="container" style="text-align: center;">
        <h1 style="font-size: 3rem; margin-bottom: var(--space-lg);">
            Learn <span style="color: var(--accent-green);">Ethical Hacking</span><br>
            Through Interactive Labs
        </h1>
        <p style="font-size: 1.2rem; max-width: 600px; margin: 0 auto var(--space-xl);">
            Master cybersecurity with hands-on terminal labs, guided learning paths,
            and CTF-style challenges. 100% safe and legal.
        </p>

        <div class="flex gap-md items-center" style="justify-content: center;">
            <a href="/register/" class="btn btn-primary" style="padding: var(--space-md) var(--space-xl);">
                Start Learning Free
            </a>
            <a href="#demo" class="btn btn-outline">
                Watch Demo
            </a>
        </div>

        <!-- Interactive Terminal Demo -->
        <div class="terminal" style="max-width: 700px; margin: var(--space-2xl) auto 0; text-align: left;">
            <div class="terminal-header">
                <span class="terminal-dot red"></span>
                <span class="terminal-dot yellow"></span>
                <span class="terminal-dot green"></span>
                <span class="terminal-title">student@academy:~$</span>
            </div>
            <div class="terminal-body" id="demo-terminal-output" style="height: 350px; overflow-y: auto;">
                <div class="terminal-output" id="demo-output-container">
                    <span style="color: var(--accent-cyan);">ğŸ¯ Welcome to the Terminal Academy demo!</span>
                    Type <span style="color: var(--accent-yellow);">help</span> to see available commands.
                    Try: <span style="color: var(--accent-green);">cat welcome.txt</span>

                </div>
            </div>
            <div style="padding: var(--space-md); background: var(--bg-tertiary); border-radius: 0 0 var(--radius-lg) var(--radius-lg);">
                <div class="terminal-input-line">
                    <span class="terminal-prompt" id="demo-prompt">student@academy:~$</span>
                    <input type="text" 
                           class="terminal-input" 
                           id="demo-command-input"
                           placeholder="Type 'help' to get started..." 
                           autofocus 
                           autocomplete="off">
                </div>
            </div>
        </div>
        
        <p style="text-align: center; margin-top: var(--space-lg); color: var(--text-muted);">
            ğŸ‘† This is a live demo! Try typing commands above.
        </p>
    </div>
</section>

<!-- Features Section -->
<section id="features" style="padding: var(--space-2xl) 0;">
    <div class="container">
        <h2 style="text-align: center; margin-bottom: var(--space-2xl);">
            Why Terminal Academy?
        </h2>

        <div class="stats-grid">
            <div class="stat-card">
                <div style="font-size: 2rem; margin-bottom: var(--space-md);">ğŸ–¥ï¸</div>
                <h4>Interactive Labs</h4>
                <p style="font-size: 0.9rem;">Learn by doing with real terminal commands in safe, simulated
                    environments.</p>
            </div>

            <div class="stat-card">
                <div style="font-size: 2rem; margin-bottom: var(--space-md);">ğŸ“ˆ</div>
                <h4>Adaptive Learning</h4>
                <p style="font-size: 0.9rem;">Courses adapt to your skill level. Start where you are, grow at your pace.
                </p>
            </div>

            <div class="stat-card">
                <div style="font-size: 2rem; margin-bottom: var(--space-md);">ğŸ†</div>
                <h4>Gamified Progress</h4>
                <p style="font-size: 0.9rem;">Earn XP, level up, unlock achievements, and compete on leaderboards.</p>
            </div>

            <div class="stat-card">
                <div style="font-size: 2rem; margin-bottom: var(--space-md);">ğŸ”’</div>
                <h4>100% Legal & Safe</h4>
                <p style="font-size: 0.9rem;">All labs are sandboxed simulations. No real systems. No legal risks.</p>
            </div>
        </div>
    </div>
</section>

<!-- Courses Preview -->
<section id="courses" style="padding: var(--space-2xl) 0; background: var(--bg-secondary);">
    <div class="container">
        <h2 style="text-align: center; margin-bottom: var(--space-sm);">
            Learning Paths
        </h2>
        <p style="text-align: center; margin-bottom: var(--space-2xl);">
            From beginner to expert, we've got you covered
        </p>

        <div class="course-grid">
            <div class="course-card">
                <div class="course-thumbnail">ğŸ§</div>
                <div class="course-content">
                    <span class="badge badge-beginner">Beginner</span>
                    <h3 class="course-title" style="margin-top: var(--space-sm);">Linux Fundamentals</h3>
                    <p style="font-size: 0.9rem;">Master the command line and essential Linux skills.</p>
                    <div class="course-meta">
                        <span>12 Lessons</span>
                        <span>4 Labs</span>
                        <span>+200 XP</span>
                    </div>
                </div>
            </div>

            <div class="course-card">
                <div class="course-thumbnail">ğŸŒ</div>
                <div class="course-content">
                    <span class="badge badge-intermediate">Intermediate</span>
                    <h3 class="course-title" style="margin-top: var(--space-sm);">Web Security Basics</h3>
                    <p style="font-size: 0.9rem;">Learn OWASP Top 10 vulnerabilities and how to test for them.</p>
                    <div class="course-meta">
                        <span>15 Lessons</span>
                        <span>8 Labs</span>
                        <span>+350 XP</span>
                    </div>
                </div>
            </div>

            <div class="course-card">
                <div class="course-thumbnail">ğŸ”</div>
                <div class="course-content">
                    <span class="badge badge-advanced">Advanced</span>
                    <h3 class="course-title" style="margin-top: var(--space-sm);">Network Reconnaissance</h3>
                    <p style="font-size: 0.9rem;">Master scanning, enumeration, and footprinting techniques.</p>
                    <div class="course-meta">
                        <span>10 Lessons</span>
                        <span>6 Labs</span>
                        <span>+500 XP</span>
                    </div>
                </div>
            </div>
        </div>

        <div style="text-align: center; margin-top: var(--space-2xl);">
            <a href="/register/" class="btn btn-primary">Start Your Journey</a>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section style="padding: var(--space-2xl) 0;">
    <div class="container" style="text-align: center;">
        <h2>Ready to Become an Ethical Hacker?</h2>
        <p style="margin-bottom: var(--space-xl);">
            Join thousands of students learning cybersecurity the right way.
        </p>
        <a href="/register/" class="btn btn-primary" style="padding: var(--space-md) var(--space-2xl);">
            Create Free Account
        </a>
    </div>
</section>

{% block extra_js %}
<script>
// Demo terminal - Client-side only, no backend calls
(function() {
    const demoOutput = document.getElementById('demo-output-container');
    const demoInput = document.getElementById('demo-command-input');
    const demoTerminalBody = document.getElementById('demo-terminal-output');
    
    if (!demoOutput || !demoInput) return; // Exit if elements don't exist
    
    // Demo filesystem
    const files = {
        'welcome.txt': `Welcome to Terminal Academy!

Learn ethical hacking through hands-on practice in a safe, simulated environment.

ğŸ“ 50+ Interactive Labs
ğŸ† Achievements & XP System
ğŸ“š Structured Learning Paths
ğŸ”’ 100% Legal & Safe

Type "help" to see what you can do here!`,
        'secret.txt': `ğŸ‰ Congratulations! You found the hidden file!

FLAG{curious_explorer_2024}

This is just a taste of what you'll find in our real labs.
Sign up to access 50+ challenges with real CTF-style flags!`,
        'notes.txt': `ğŸ“ Security Best Practices:

1. Always get permission before testing
2. Never use skills maliciously
3. Keep learning and stay curious
4. Join our community!

Ready to level up? Sign up above! â¬†ï¸`,
        'courses.txt': `ğŸ“š Available Courses:

1. Linux Fundamentals (10 lessons, 500 XP)
2. Web Security Basics (15 lessons, 750 XP)
3. Network Reconnaissance (12 lessons, 600 XP)

Sign up to start learning!`
    };
    
    // Command handlers
    const commands = {
        'help': () => `<span style="color: var(--accent-cyan);">Available commands:</span>
  <span style="color: var(--accent-green);">ls</span>          - List files in current directory
  <span style="color: var(--accent-green);">cat</span> \u003cfile\u003e  - Display file contents
  <span style="color: var(--accent-green);">pwd</span>         - Show current directory
  <span style="color: var(--accent-green);">whoami</span>      - Display current user
  <span style="color: var(--accent-green);">clear</span>       - Clear the terminal
  <span style="color: var(--accent-green);">hint</span>        - Get a hint

<span style="color: var(--accent-yellow);">ğŸ’¡ Try:</span> cat welcome.txt`,
        
        'ls': () => `welcome.txt  secret.txt  notes.txt  courses.txt`,
        
        'ls -la': () => `-rw-r--r-- 1 student student  245 Jan 18 12:00 welcome.txt
-rw-r--r-- 1 student student  156 Jan 18 12:00 secret.txt
-rw-r--r-- 1 student student  198 Jan 18 12:00 notes.txt
-rw-r--r-- 1 student student  182 Jan 18 12:00 courses.txt`,
        
        'pwd': () => `/home/student`,
        
        'whoami': () => `student`,
        
        'clear': () => 'CLEAR',
        
        'hint': () => `<span style="color: var(--accent-yellow);">ğŸ’¡ Hint:</span> Try listing files with <span style="color: var(--accent-green);">ls</span>, then read them with <span style="color: var(--accent-green);">cat filename</span>

There might be something interesting in secret.txt... ğŸ‘€`,
        
        // Easter eggs
        'hack': () => `<span style="color: var(--accent-red);">âš ï¸ Whoa there!</span> 

First, learn <em>how</em> to hack ethically with our courses! ğŸ˜‰
<a href="/register/" style="color: var(--accent-cyan);">Sign up</a> to start your journey.`,
        
        'sudo rm -rf /': () => `<span style="color: var(--accent-red);">ğŸ˜± Nice try!</span>

But this is a <strong>safe</strong> environment. No real systems harmed!

Join us to learn dangerous commands <em>safely</em>. ğŸ›¡ï¸`,
        
        'exit': () => `<span style="color: var(--accent-yellow);">ğŸ‘‹ Leaving so soon?</span>

<a href="/register/" style="color: var(--accent-cyan);">Sign up</a> instead to access real labs!`,
    };
    
    // Cat command handler
    function handleCat(args) {
        const filename = args.trim();
        if (!filename) {
            return `cat: missing file operand
Try 'cat welcome.txt'`;
        }
        
        if (files[filename]) {
            return files[filename];
        }
        
        return `cat: ${escapeHtml(filename)}: No such file or directory

Try <span style="color: var(--accent-green);">ls</span> to see available files.`;
    }
    
    // Execute command
    function executeCommand(cmd) {
        cmd = cmd.trim().toLowerCase();
        
        // Special case: clear
        if (cmd === 'clear' || cmd === 'cls') {
            demoOutput.innerHTML = `<span style="color: var(--accent-cyan);">Terminal cleared. Type help for commands.</span>

`;
            return;
        }
        
        // Show command
        appendOutput(`<span class="terminal-prompt">student@academy:~$</span> <span class="terminal-command">${escapeHtml(cmd)}</span>`);
        
        // Handle cat separately
        if (cmd.startsWith('cat ')) {
            const filename = cmd.substring(4);
            appendOutput(handleCat(filename));
            return;
        }
        
        // Check if command exists
        if (commands[cmd]) {
            const result = commands[cmd]();
            appendOutput(result);
        } else if (cmd) {
            appendOutput(`<span style="color: var(--accent-red);">${escapeHtml(cmd)}: command not found</span>

Type <span style="color: var(--accent-green);">help</span> to see available commands.`);
        }
    }
    
    function appendOutput(html) {
        demoOutput.innerHTML += '\n' + html;
        demoTerminalBody.scrollTop = demoTerminalBody.scrollHeight;
    }
    
    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
    
    // Enter key handler
    demoInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            const cmd = demoInput.value;
            executeCommand(cmd);
            demoInput.value = '';
        }
    });
    
    // Auto-focus on click
    demoTerminalBody.addEventListener('click', () => {
        demoInput.focus();
    });
})();
</script>
{% endblock %}
{% endblock %}